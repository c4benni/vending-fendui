(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{530:function(e,t,r){var o=r(5),n=r(302).values;o({target:"Object",stat:!0},{values:function(e){return n(e)}})},537:function(e,t,r){var content=r(551);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("0439d45e",content,!0,{sourceMap:!1})},538:function(e,t,r){var content=r(554);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("2841f6f6",content,!0,{sourceMap:!1})},550:function(e,t,r){"use strict";r(537)},551:function(e,t,r){var o=r(39)((function(i){return i[1]}));o.push([e.i,'.root[data-ui-switch]{--ui-height:28px;--ui-width:44px;--ui-track-height:100%;--ui-track-width:100%;--ui-track-radius:16px;--ui-track-background:#999;--ui-track-background-checked:#007bff;--ui-thumb-size:25px;--ui-thumb-radius:50%;--ui-thumb-translatex:calc(var(--ui-width) - var(--ui-thumb-size) - var(--ui-thumb-offset));--ui-thumb-offset:1.5px;--ui-thumb-shadow:0px 0.5px 1px -1px rgba(0,0,0,0.2),0px 1px 2px 0px rgba(0,0,0,0.15),0px 1px 3px 0px rgba(0,0,0,0.1);--ui-thumb-background:#fff;height:var(--ui-height);width:var(--ui-width);display:inline-grid;place-items:center;position:relative;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:none;background:none;isolation:isolate}.root[data-ui-switch]:focus-within{outline:solid transparent}.track[data-ui-switch]{height:var(--ui-track-height);width:var(--ui-track-width);border-radius:var(--ui-track-radius);position:absolute;background:var(--ui-track-background);isolation:isolate;pointer-events:none}.track[data-ui-switch]:before{content:"";position:absolute;border-radius:inherit;width:100%;height:100%;background:var(--ui-track-background-checked);opacity:0;transition:opacity .15s ease-in-out;z-index:-1;left:0}.track[data-ui-switch].checked:before{opacity:1}.thumb[data-ui-switch]{z-index:1;background-color:var(--ui-thumb-background);box-shadow:var(--ui-thumb-shadow);width:var(--ui-thumb-size);height:var(--ui-thumb-size);border-radius:var(--ui-thumb-radius);position:absolute;left:0;transition:transform .2s,opacity .2s;transform:translate3d(var(--ui-thumb-offset),0,0)}.thumb[data-ui-switch].checked{transform:translate3d(var(--ui-thumb-translatex),0,0)}.input[data-ui-switch]{left:50%;top:50%;position:absolute;transform:translate(-75%,-75%);-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:0;pointer-events:none}',""]),o.locals={},e.exports=o},552:function(e,t,r){"use strict";var o=r(5),n=r(91).findIndex,l=r(92),c="findIndex",d=!0;c in[]&&Array(1).findIndex((function(){d=!1})),o({target:"Array",proto:!0,forced:d},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),l(c)},553:function(e,t,r){"use strict";r(538)},554:function(e,t,r){var o=r(39)((function(i){return i[1]}));o.push([e.i,".root[data-sape]{--header-height:64px}.lg-up .root[data-sape]{--header-height:80px}.root[data-sape]{min-height:calc(100vh - var(--header-height));isolation:isolate}.tablist[data-sape]{--height:48px;height:var(--height);display:flex;background:var(--theme-background);position:-webkit-sticky;position:sticky;isolation:isolate;contain:content;z-index:10}.tablist[data-sape]:before{height:2.5px;width:50%;bottom:0;top:auto;border-radius:4px;transition:transform .25s ease-in-out;transform:translate3d(var(--transform),0,0);z-index:1}.tablist[data-sape]:after{opacity:.1;border-bottom:.75px solid}.tabctrl[data-sape]{transform:scale3d(.875,.875,1)}.tabctrl[data-sape].__selected{transform:scaleX(1)}.tabctrl-text[data-sape]{font-weight:400;opacity:.8;transition:opacity .15s linear;font-size:1rem}.tabctrl-text[data-sape].__selected{opacity:1;font-weight:500}",""]),o.locals={},e.exports=o},564:function(e,t,r){"use strict";r.r(t);var o=r(0),n=(r(24),r(143),r(19),r(75),r(301),r(6)),main=(r(47),r(21),r(14),r(18),r(8),r(22),r(13),r(23),r(3));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={name:"TabFooter",props:{fullBleed:Boolean,disableRevert:Boolean,disableSave:Boolean},computed:{showActions:function(){var e;return!(null!==(e=this.$slots.default)&&void 0!==e&&e.length)},actions:function(){var e=this;return[{title:"Revert changes",text:!0,onClick:function(){e.$emit("revert-changes")},classList:["pl-0 font-normal",{"text-red-700 dark:text-red-500":!this.disableRevert,"opacity-40":this.disableRevert,"ml-6":this.fullBleed}],disabled:this.disableRevert},{title:"Save changes",onClick:function(){e.$emit("save-changes")},classList:[{"bg-green-700 text-white dark:bg-green-400 dark:text-blue-gray-900 hover:bg-green-800 dark:hover:bg-green-500":!this.disableSave,"opacity-60":this.disableSave,"mr-6":this.fullBleed}],disabled:this.disableSave}]},activeTab:function(){return this.$route.query.tab},leftPaddel:function(){if(!this.activeTab||"general"==this.activeTab)return{};var e="preference"==this.activeTab?"general":"change-password"==this.activeTab?"preference":"change-password";return{text:Object(main.c)(e).replace(/-/g," "),to:{query:c(c({},this.$route.query),{},{tab:e})}}},rightPaddel:function(){if("delete-account"==this.activeTab)return{};var e="general"!=this.activeTab&&this.activeTab&&/preference|change-password|delete-account/.test(this.activeTab)?"preference"==this.activeTab?"change-password":"delete-account":"preference";return{text:Object(main.c)(e).replace(/-/g,"   "),to:{query:c(c({},this.$route.query),{},{tab:e})},warn:"delete-account"==e}}}},f=r(17),m=Object(f.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-10 relative fill-before before-divide before:border-t",class:{"py-6":!e.fullBleed,"pt-6":e.fullBleed}},[e._t("default"),e._v(" "),e.showActions?r("div",{staticClass:"flex justify-between w-full mt-[24px]"},e._l(e.actions,(function(t,i){return r("ui-btn",{key:i,class:t.classList,attrs:{text:t.text,disabled:t.disabled},on:{click:t.onClick}},[e._v(e._s(t.title))])})),1):e._e(),e._v(" "),r("div",{staticClass:"relative fill-before before-divide before:border-t mt-[48px] pt-6"},[r("div",{staticClass:"rounded-sm md:mx-auto p-3 fill-before relative before-divide before:border flex justify-start bg-blue-700 dark:bg-blue-400 items-start w-[fit-content] bg-opacity-30 dark:bg-opacity-30",class:{"mx-6":e.fullBleed}},[r("ui-icon",{attrs:{name:"info"}}),e._v(" "),r("p",{staticClass:"text-sm opacity-90 ml-[0.5rem]",class:{"mx-6":e.fullBleed}},[e._v("Please note that leaving this tab will automatically revert unsaved changes.")])],1),e._v(" "),r("div",{staticClass:"pt-6 flex w-full justify-between items-center"},[r("ui-btn",{staticClass:"font-normal text-blue-700 dark:text-blue-500 px-0",class:{invisible:!e.leftPaddel.text,"ml-6":e.fullBleed},attrs:{to:e.leftPaddel.to,"component-props":{replace:!0}}},[r("ui-icon",{attrs:{name:"chevron-left"}}),e._v("\n                "+e._s(e.leftPaddel.text)+"\n            ")],1),e._v(" "),r("ui-btn",{staticClass:"font-normal px-0",class:{invisible:!e.rightPaddel.text,"mr-6":e.fullBleed,"text-blue-700 dark:text-blue-500":!e.rightPaddel.warn,"text-red-700 dark:text-red-500":e.rightPaddel.warn},attrs:{to:e.rightPaddel.to,"component-props":{replace:!0}}},[e._v("\n                "+e._s(e.rightPaddel.text)+"\n                "),r("ui-icon",{attrs:{name:"chevron-right"}})],1)],1)])],2)}),[],!1,null,null,null).exports;r(88);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={name:"UiSwitch",inheritAttrs:!1,model:{event:"update:modelValue",prop:"modelValue"},props:{modelValue:{type:Boolean,default:void 0},tag:{type:String,default:"div"},id:{type:String,default:void 0},required:Boolean,readonly:Boolean,disabled:Boolean,validate:{type:Function,default:function(){return!0}},initial:Boolean,height:{type:[String,Number],default:void 0},width:{type:[String,Number],default:void 0}},emits:["update:modelValue"],data:function(){return{inputDirtied:!1,manualChecked:!1}},computed:{vmodel:function(){return"boolean"==typeof this.modelValue?this.modelValue:this.manualChecked},validation:function(){var e;if("function"!=typeof this.validate)return{valid:void 0,message:""};var t=null===(e=this.validate)||void 0===e?void 0:e.call(this,this.vmodel);return void 0!==t&&this.inputDirtied?"string"==typeof t?{valid:!1,message:t}:!0===t?{valid:!0,message:""}:{valid:void 0,message:""}:{valid:void 0,message:""}},payload:function(){return{active:this.vmodel,validation:this.validation,toggle:this.toggle}},getSize:function(){var output={width:"",height:""};return"string"==typeof this.width?output.width=this.width:"number"==typeof this.width&&(output.width="".concat(this.width,"px")),"string"==typeof this.height?output.height=this.height:"number"==typeof this.height&&(output.height="".concat(this.height,"px")),output}},watch:{validation:function(){this.setValidationMessage()}},created:function(){this.setValidationMessage()},methods:{runValidate:function(){var e;this.inputDirtied=!0,null===(e=this.validate)||void 0===e||e.call(this,this.vmodel),this.setValidationMessage()},toggle:function(e){this.readonly||this.disabled||(this.$emit("update:modelValue",e),this.manualChecked=e)},setValidationMessage:function(){var e=this;this.$nextTick((function(){var t,r;null===(t=e.validate)||void 0===t||t.call(e,e.vmodel);var input=e.$refs.input,o=e.validation.message;null==input||null===(r=input.setCustomValidity)||void 0===r||r.call(input,o)}))}},render:function(e){var t,r,o,n,l,c,d=this;void 0===this.vmodel&&(this.manualChecked=this.initial||!1);var f,m,h={"data-ui-switch":""},div=function(t,r){return e("div",t,r)};return[e(this.tag,{attrs:v(v(v({},h),this.$attrs),{},{role:"switch","aria-checked":"".concat(this.vmodel),"aria-readonly":this.readonly}),class:["root",{checked:this.vmodel},this.$attrs.class],style:v({"--ui-height":this.getSize.height,"--ui-width":this.getSize.width},this.$attrs.style||{}),on:{click:function(){var e,t,r;null===(e=d.$refs)||void 0===e||null===(t=e.input)||void 0===t||null===(r=t.click)||void 0===r||r.call(t),Object(main.s)()}}},[div({attrs:v({},h),class:["track",{checked:this.vmodel}]},[(null===(t=(r=this.$scopedSlots).track)||void 0===t?void 0:t.call(r,this.payload))||null]),div({attrs:v({},h),class:["thumb",{checked:this.vmodel}]},[(f={ref:"input",attrs:v(v({},h),{},{type:"checkbox",tabindex:"-1",required:this.required,disabled:this.disabled,readonly:this.readonly}),domProps:{id:this.id,checked:this.vmodel?"checked":void 0},class:["input"],on:{input:function(e){var t,r=e.currentTarget.checked;d.inputDirtied=!0,d.toggle(r),null===(t=d.validate)||void 0===t||t.call(d,d.vmodel)}}},e("input",f,m)),(null===(o=(n=this.$scopedSlots).thumb)||void 0===o?void 0:o.call(n,this.payload))||null]),(null===(l=(c=this.$scopedSlots).default)||void 0===l?void 0:l.call(c,this.payload))||null])]}},y=(r(550),Object(f.a)(w,undefined,undefined,!1,null,null,null).exports),x="^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,32}$",P=new RegExp("".concat(x)),k={name:"ChanePasswordTab",components:{uiSwitch:y,tabFooter:m},data:function(){return{passwordPattern:x,form:{oldPassword:"",newPassword:"",confirmPassword:"",endSessions:!1,key:null},validatePasswords:{oldPassword:!1,newPassword:!1,confirmPassword:!1}}},computed:{user:function(){return this.$store.getters.userInfo},newPasswordInputs:function(){var e=this;return[{model:this.form.newPassword,label:"New password",placeholder:"6+ characters",id:"new-password-input",autocomplete:"new-password",validate:function(t){var r=e.validatePassword(t);return"string"==typeof r?r:e.form.newPassword!=e.form.oldPassword||"New password must be different"},inputValidity:function(t){e.form.newPassword&&(e.validatePasswords.newPassword=t)},onUpdate:function(t){e.form.newPassword=t},disabled:!this.validatePasswords.oldPassword},{model:this.form.confirmPassword,label:"Confirm password",placeholder:"Must match new password",id:"confirm-password-input",autocomplete:"new-password",validate:function(t){var r=e.validatePassword(t);return"string"==typeof r?r:e.form.newPassword==e.form.confirmPassword||"Passwords must match"},inputValidity:function(t){e.form.confirmPassword&&(e.validatePasswords.confirmPassword=t)},onUpdate:function(t){e.form.confirmPassword=t},disabled:!this.validatePasswords.oldPassword||!this.validatePasswords.newPassword}]},disableSubmit:function(){return!this.validatePasswords.oldPassword||!this.validatePasswords.newPassword||!this.validatePasswords.confirmPassword}},created:function(){this.form.key=Date.now()},methods:{validateOldPassword:function(e){this.validatePasswords.oldPassword=e},updateOldPassword:function(e){this.form.oldPassword=e},validatePassword:function(e){var t=null==e?void 0:e.trim();return t?t.length<6?"Min length is 6":t.length>32?"Max length is 32":/[a-z]/.test(t)?/[A-Z]/.test(t)?/\d/.test(t)?/@|\$|!|%|\*|\?|&/.test(t)?!!P.test(t)||"Invalid character(s)":"Special character needed":"At least 1 number":"At least 1 uppercase":"At least 1 lowercase":"Required"},resetForm:function(){this.form.oldPassword="",this.form.newPassword="",this.form.confirmPassword="",this.form.endSessions=!1,this.form.key=Date.now()},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disableSubmit){t.next=2;break}return t.abrupt("return",null);case 2:return e.$commit("UPDATE",{path:"processingDone",value:null}),t.next=5,e.$nextTick();case 5:return e.$commit("UPDATE",{path:"dashboardProcessing",value:!0}),e.$commit("UPDATE",{path:"processingDone",value:{title:"Updating password",subtitle:"Please wait while we update your password.",key:Date.now()}}),r={password:{old:e.form.oldPassword,new:e.form.confirmPassword,endOtherSessions:e.form.endSessions}},t.next=10,e.$apiCall("user","PATCH",r);case 10:return o=t.sent,data=o.data,n=o.error,e.resetForm(),e.$commit("UPDATE",{path:"processingDone",value:{title:n?"An error occured":"Password updated!",subtitle:(null==n?void 0:n.message)||(null==data?void 0:data.message),error:!!n,key:Date.now()}}),t.next=17,e.$sleep();case 17:return t.next=19,e.$refreshUser();case 19:case"end":return t.stop()}}),t)})))()}}},O=Object(f.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mt-6 md:m-6 fill-before before-divide before:border relative max-w-[600px] mx-auto self-start justify-self-center pt-10 w-full"},[r("h2",{staticClass:"text-xl px-6 font-bold fill-before before-divide before:border-b relative pb-4"},[e._v("Update password")]),e._v(" "),r("ui-form",{key:"form"+e.form.key,staticClass:"mt-10 mb-6 px-6",attrs:{name:"password-form","show-submit":!1}},[r("input",{staticClass:"sr-only",attrs:{autocomplete:"username"},domProps:{value:e.user.username}}),e._v(" "),r("ui-input",{key:"current-password"+e.form.key,attrs:{id:"current-password","model-value":e.form.oldPassword,type:"password",label:"Current password",autocomplete:"current-password",placeholder:"6+ characters",validate:e.validatePassword,pattern:e.passwordPattern,"main-class":["rounded-md bg-blue-gray-50 dark:bg-blue-gray-900 md:h-[64px] rounded-md bg-white dark:bg-blue-gray-900 md:h-[64px] border border-black dark:border-white border-opacity-10 dark:border-opacity-10"]},on:{"update:modelValue":e.updateOldPassword,"input-validity":e.validateOldPassword}}),e._v(" "),r("div",{staticClass:"h-[1px] relative w-full my-10 fill-before before-divide before:border-t"}),e._v(" "),r("fieldset",e._l(e.newPasswordInputs,(function(input,i){return r("ui-input",{key:i+e.form.key,attrs:{id:input.id,"model-value":input.model,type:"password",label:input.label,autocomplete:input.autocomplete,placeholder:input.placeholder,validate:input.validate,pattern:e.passwordPattern,disabled:input.disabled,"main-class":["rounded-md bg-blue-gray-50 dark:bg-blue-gray-900 md:h-[64px] rounded-md bg-white dark:bg-blue-gray-900 md:h-[64px] border border-black dark:border-white border-opacity-10 dark:border-opacity-10",{"mt-4":1==i}]},on:{"input-validity":input.inputValidity,"update:modelValue":input.onUpdate}})})),1),e._v(" "),r("div",{staticClass:"w-full pt-4"},[r("div",{staticClass:"flex justify-between items-center mt-8 mx-2"},[r("label",{staticClass:"flex-grow cursor-pointer",attrs:{for:"end-sessions"}},[e._v("End all other active sessions")]),e._v(" "),r("ui-switch",{attrs:{id:"end-sessions"},model:{value:e.form.endSessions,callback:function(t){e.$set(e.form,"endSessions",t)},expression:"form.endSessions"}})],1),e._v(" "),r("p",{key:e.form.endSessions,staticClass:"text-sm opacity-70 mt-1 mx-2 fade-appear",staticStyle:{"--appear-to":"0.7"}},[e._v("\n                "+e._s(e.form.endSessions?"This account will be logged out from all other devices.":"")+"\n            ")])])],1),e._v(" "),r("tab-footer",{attrs:{"full-bleed":""}},[r("div",{staticClass:"mt-6 flex w-full justify-center"},[r("ui-btn",{staticClass:"gap-x-2 px-6 h-[48px]",class:{"bg-green-700 text-white dark:bg-green-400 dark:text-blue-gray-900 hover:bg-green-800 dark:hover:bg-green-500":!e.disableSubmit},attrs:{disabled:e.disableSubmit},on:{click:e.submit}},[r("ui-icon",{attrs:{name:"save"}}),e._v("Update password\n            ")],1)],1)])],1)}),[],!1,null,null,null).exports,j=r(146);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $="^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,32}$",D=new RegExp("".concat($)),S={name:"DeleteAccountTab",components:{tabFooter:m},data:function(){return{showAlert:!1,passwordPattern:$,form:{password:"",key:Date.now()},passwordValid:!1}},computed:{user:function(){return this.$store.getters.userInfo},disableSubmit:function(){return!this.passwordValid},confirmActions:function(){var e=this;return[{title:"Cancel",onClick:function(){e.$router.replace({query:C(C({},e.$route.query),{},{tab:"general"})})},classList:["pl-0 font-normal"]},{title:"Delete account",onClick:this.submit,classList:["bg-red-700 text-white dark:bg-red-400 dark:text-blue-gray-900 hover:bg-red-800 dark:hover:bg-red-500 ml-6"]}]}},methods:{validateCurrentPassword:function(e){this.passwordValid=e},updatePassword:function(e){this.form.password=e},validatePassword:function(e){var t=null==e?void 0:e.trim();return t?t.length<6?"Min length is 6":t.length>32?"Max length is 32":/[a-z]/.test(t)?/[A-Z]/.test(t)?/\d/.test(t)?/@|\$|!|%|\*|\?|&/.test(t)?!!D.test(t)||"Invalid character(s)":"Special character needed":"At least 1 number":"At least 1 uppercase":"At least 1 lowercase":"Required"},resetForm:function(){this.form.password="",this.form.key=Date.now(),this.showAlert=!1},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disableSubmit){t.next=2;break}return t.abrupt("return",null);case 2:return e.$commit("UPDATE",{path:"processingDone",value:null}),t.next=5,e.$nextTick();case 5:return e.$commit("UPDATE",{path:"dashboardProcessing",value:!0}),e.$commit("UPDATE",{path:"processingDone",value:{title:"Deleting profile",subtitle:"Please wait while we delete your profile.",key:Date.now()}}),r={password:e.form.password},t.next=10,j.a.deleteUser.call(e,r);case 10:return o=t.sent,data=o.data,n=o.error,e.resetForm(),e.$commit("UPDATE",{path:"processingDone",value:{title:n?"An error occured":"Your profile has been deleted!",subtitle:(null==n?void 0:n.message)||(null==data?void 0:data.message),error:!!n,key:Date.now()}}),t.next=17,e.$sleep();case 17:if(n){t.next=22;break}return t.next=20,e.$sleep(1500);case 20:return t.next=22,e.$refreshUser("/");case 22:case"end":return t.stop()}}),t)})))()}}},A=Object(f.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mt-6 md:m-6 fill-before before-divide before:border relative max-w-[600px] mx-auto self-start justify-self-center pt-10 w-full"},[r("h2",{staticClass:"text-xl px-6 font-bold fill-before before-divide before:border-b relative pb-4"},[e._v("Enter password")]),e._v(" "),r("ui-form",{key:e.form.key,staticClass:"mt-10 mb-6 px-6",attrs:{name:"password-form","show-submit":!1}},[r("input",{staticClass:"sr-only",attrs:{autocomplete:"username"},domProps:{value:e.user.username}}),e._v(" "),r("ui-input",{attrs:{id:"current-password","model-value":e.form.password,type:"password",label:"Password",autocomplete:"current-password",placeholder:"6+ characters",validate:e.validatePassword,pattern:e.passwordPattern,"main-class":["rounded-md bg-blue-gray-50 dark:bg-blue-gray-900 md:h-[64px] rounded-md bg-white dark:bg-blue-gray-900 md:h-[64px] border border-black dark:border-white border-opacity-10 dark:border-opacity-10"]},on:{"update:modelValue":e.updatePassword,"input-validity":e.validateCurrentPassword}})],1),e._v(" "),r("tab-footer",{attrs:{"full-bleed":""}},[e.showAlert?r("div",{staticClass:"fade-appear px-6",staticStyle:{"--appear-duration":"350ms"}},[r("div",{staticClass:"rounded-sm mt-[32px] mx-auto p-3 fill-before relative before-divide before:border flex justify-start bg-red-700 dark:bg-red-500 items-start w-[fit-content] bg-opacity-30 dark:bg-opacity-30"},[r("ui-icon",{attrs:{name:"alert"}}),e._v(" "),r("p",{staticClass:"text-sm opacity-90 ml-[0.5rem]"},[e._v("Are you sure about this? This action cannot be undone.")])],1),e._v(" "),r("div",{staticClass:"flex justify-center w-full mt-6 px-6"},e._l(e.confirmActions,(function(t,i){return r("ui-btn",{key:i,class:t.classList,on:{click:t.onClick}},[e._v(e._s(t.title))])})),1)]):r("div",{staticClass:"mt-6 flex w-full justify-center"},[r("ui-btn",{staticClass:"gap-x-2 px-6 h-[48px]",class:{"bg-red-700 text-white dark:bg-red-400 dark:text-blue-gray-900 hover:bg-red-800 dark:hover:bg-red-500":!e.disableSubmit},attrs:{disabled:e.disableSubmit},on:{click:function(t){e.showAlert=!e.showAlert}}},[r("ui-icon",{attrs:{name:"delete"}}),e._v("Delete account\n            ")],1)],1)])],1)}),[],!1,null,null,null).exports;r(46),r(87),r(108),r(530);function T(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var U={name:"GeneralTab",components:{appImg:r(197).default,uiSwitch:y,tabFooter:m},data:function(){return{form:{username:"",displayName:"",bio:"",publicProfile:!1},validateFields:{username:!0,displayName:!0,bio:!0}}},computed:B(B({},main.d),{},{activeTab:function(){return this.$route.query.tab},pageActive:function(){return"general"==this.activeTab||!/preference|change-password|delete-account/.test(this.activeTab)},media:function(){return this.$store.state.media},user:function(){return this.$store.getters.userInfo},isBuyer:function(){return this.user.isBuyer},isSeller:function(){return this.user.isSeller},getBalance:function(){if(!this.$store.state.showBalance)return"*****";var e=this.isBuyer?"deposit":"income";return"Total ".concat(e,": ").concat(this.user["".concat(e,"Total")])},miniDevice:function(){return/xxs|xs|sm/.test(this.breakpoints.is)},userImage:function(){return this.user.image||"/samples/people/boy-snow-hoodie"},informationInput:function(){var e=this;return[{model:this.form.username,placeholder:"username",label:"Username",id:"username-input",autocomplete:"username",validate:function(input){if(!input)return"Required";var e=input.trim();return e.length<3?"Min length is 3":!(e.length>20)||"Max length is 20"},onUpdate:function(t){e.form.username=t},inputValidity:function(t){e.form.username&&(e.validateFields.username=t)}},{disabled:!0,model:Object(main.c)(this.user.role),label:"Account type",id:"role-input",onUpdate:function(){},inputValidity:function(){}},{model:this.form.displayName,label:"Display name",placeholder:"David Mark",id:"display-name-input",autocomplete:"name",pattern:"^([a-zA-Z0-9\\s]){3,99}$",validate:function(input){if(input){var e=input.trim();if(!/^([a-zA-Z0-9\s]){3,99}$/.test(e))return"Invalid character(s)";if(e.length<3)return"Min length is 3";if(e.length>99)return"Max length is 99"}return!0},onUpdate:function(t){e.form.displayName=t},inputValidity:function(t){e.form.displayName&&(e.validateFields.displayName=t)}},{model:this.form.bio,label:"Bio",type:"textarea",placeholder:"Something about you",id:"bio-input",autocomplete:"bio-input",validate:function(input){if(input&&input.trim().length<3)return"Min length is 3";return!0},onUpdate:function(t){e.form.bio=t},inputValidity:function(t){e.form.bio&&(e.validateFields.bio=t)}}]},formUpdated:function(){var e=this.form.username!==this.user.username,t=this.form.displayName!==this.user.displayName,r=this.form.bio!==this.user.bio,o=this.form.publicProfile!==this.user.publicProfile;return e||t||r||o},disableSave:function(){return!this.formUpdated||Object.values(this.validateFields).includes(!1)},submitPayload:function(){var e=this.form,t=e.username,r={displayName:e.displayName,bio:e.bio,publicProfile:e.publicProfile};for(var o in t!==this.user.username&&(r.username=t),r)r[o]||delete r[o];return r}}),created:function(){this.resetForm()},methods:{resetForm:function(){this.form.username=this.user.username,this.form.displayName=this.user.displayName,this.form.bio=this.user.bio,this.form.publicProfile=this.user.publicProfile},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disableSave){t.next=2;break}return t.abrupt("return",null);case 2:return e.$commit("UPDATE",{path:"processingDone",value:null}),t.next=5,e.$nextTick();case 5:return e.$commit("UPDATE",{path:"dashboardProcessing",value:!0}),e.$commit("UPDATE",{path:"processingDone",value:{title:"Updating information",subtitle:"Please wait while we update your profile information.",key:Date.now()}}),r=B({},e.submitPayload),t.next=10,j.a.updateUser.call(e,r);case 10:return o=t.sent,data=o.data,n=o.error,e.$commit("UPDATE",{path:"processingDone",value:{title:n?"An error occured":"Profile updated!",subtitle:(null==n?void 0:n.message)||(null==data?void 0:data.message),error:!!n,key:Date.now()}}),t.next=16,e.$sleep();case 16:return t.next=18,e.$refreshUser();case 18:case"end":return t.stop()}}),t)})))()}}},E=Object(f.a)(U,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card p-0 mt-6 md:m-6 fill-before before-divide before:border relative max-w-[660px] mx-auto self-start justify-self-center",class:{invisible:!e.pageActive}},[r("div",{staticClass:"h-[200px] md:h-[250px] relative"},[r("div",{staticClass:"h-full rounded-t-md overflow-hidden fill-before relative before-divide before:border-b isolate"},[r("app-img",{attrs:{alt:"header image","public-id":e.media.header}}),e._v(" "),r("div",{staticClass:"absolute bg-black bg-opacity-50 w-full h-full grid items-center justify-center text-white transition-opacity opacity-0 hover:opacity-100 z-10 top-0"},[r("ui-btn",{staticClass:"w-[48px] h-[48px] rounded-full"},[r("ui-icon",{attrs:{name:"upload",size:"32"}})],1)],1)],1),e._v(" "),r("ui-btn",{staticClass:"w-[96px] h-[96px] md:w-[128px] md:h-[128px] rounded-full absolute md:bottom-[-64px] bottom-[-48px] left-3 md:left-6 p-0",attrs:{outlined:"","outlined-opacity":"0.1"}},[r("app-img",{staticClass:"w-full h-full absolute rounded-full object-cover",attrs:{alt:"account image","public-id":e.userImage,radius:"max","fetch-format":"auto",quality:"100"}}),e._v(" "),r("div",{staticClass:"absolute bg-black bg-opacity-50 w-full h-full grid items-center justify-center text-white transition-opacity opacity-0 hover:opacity-100"},[r("ui-icon",{attrs:{name:"upload",size:"32"}})],1)],1)],1),e._v(" "),r("p",{staticClass:"text-right opacity-70 text-sm mt-2 right-6 absolute w-full"},[e._v(e._s(e.getBalance))]),e._v(" "),r("div",{staticClass:"md:mt-[64px] mt-[48px] px-6 pt-6"},[r("h2",{staticClass:"text-lg font-bold"},[e._v("Profile information")]),e._v(" "),r("ui-form",{staticClass:"mt-3 mb-6",attrs:{name:"profile-information","show-submit":!1}},[e._l(e.informationInput,(function(input,i){return r("ui-input",{key:i,attrs:{id:input.id,"model-value":input.model,type:input.type,disabled:input.disabled,label:input.label,autocomplete:input.autocomplete,placeholder:input.placeholder,validate:input.validate,"main-class":["rounded-md bg-blue-gray-50 dark:bg-blue-gray-900 md:h-[64px] rounded-md bg-white dark:bg-blue-gray-900 md:h-[64px] border border-black dark:border-white border-opacity-10 dark:border-opacity-10",{"mt-4":0!=i}]},on:{"update:modelValue":input.onUpdate,"input-validity":input.inputValidity}})})),e._v(" "),r("div",{staticClass:"w-full"},[r("div",{staticClass:"flex justify-between items-center mt-8 mx-2"},[r("label",{staticClass:"flex-grow cursor-pointer",attrs:{for:"public-profile"}},[e._v("Make profile information public")]),e._v(" "),r("ui-switch",{attrs:{id:"public-profile"},model:{value:e.form.publicProfile,callback:function(t){e.$set(e.form,"publicProfile",t)},expression:"form.publicProfile"}})],1),e._v(" "),r("p",{staticClass:"text-sm opacity-70 mt-1 mx-2"},[e._v("\n                    "+e._s(e.form.publicProfile?"Your profile information will be visible to all registered users.":"Your profile information will be kept hidden.")+"\n                ")])])],2),e._v(" "),r("tab-footer",{attrs:{"disable-revert":!e.formUpdated,"disable-save":e.disableSave},on:{"save-changes":e.submit,"revert-changes":e.resetForm}})],1)])}),[],!1,null,null,null).exports;function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var V={name:"PreferenceTab",components:{uiSwitch:y,tabFooter:m},data:function(){return{form:{showBalance:!1,showBalanceFromAccountPage:!1,rememberMe:!0,logoutOtherSessions:!1}}},computed:{user:function(){return this.$store.getters.userInfo},formUpdated:function(){var e=this.form.showBalance!==this.user.showBalance,t=this.form.showBalanceFromAccountPage!==this.user.showBalanceFromAccountPage,r=this.form.rememberMe!==this.user.rememberMe,o=this.form.logoutOtherSessions!==this.user.logoutOtherSessions;return e||t||r||o},submitPayload:function(){var e=this.form;return{showBalance:e.showBalance,showBalanceFromAccountPage:e.showBalanceFromAccountPage,rememberMe:e.rememberMe,logoutOtherSessions:e.logoutOtherSessions}}},created:function(){this.resetForm()},methods:{resetForm:function(){this.form.showBalance=this.user.showBalance,this.form.showBalanceFromAccountPage=this.user.showBalanceFromAccountPage,this.form.rememberMe=this.user.rememberMe,this.form.logoutOtherSessions=this.user.logoutOtherSessions},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formUpdated){t.next=2;break}return t.abrupt("return",null);case 2:return e.$commit("UPDATE",{path:"processingDone",value:null}),t.next=5,e.$nextTick();case 5:return e.$commit("UPDATE",{path:"dashboardProcessing",value:!0}),e.$commit("UPDATE",{path:"processingDone",value:{title:"Updating information",subtitle:"Please wait while we update your profile information.",key:Date.now()}}),r=M({},e.submitPayload),t.next=10,e.$apiCall("user","PATCH",r);case 10:return o=t.sent,data=o.data,n=o.error,e.$commit("UPDATE",{path:"processingDone",value:{title:n?"An error occured":"Profile updated!",subtitle:(null==n?void 0:n.message)||(null==data?void 0:data.message),error:!!n,key:Date.now()}}),t.next=16,e.$sleep();case 16:return t.next=18,e.$refreshUser();case 18:e.$toggleShowBalance(!e.user.showBalance);case 19:case"end":return t.stop()}}),t)})))()}}},I=Object(f.a)(V,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mt-6 md:m-6 fill-before before-divide before:border relative max-w-[660px] mx-auto self-start justify-self-center pt-10 w-full"},[r("h2",{staticClass:"text-xl px-6 font-bold fill-before before-divide before:border-b relative pb-4"},[e._v("App preference")]),e._v(" "),r("div",{staticClass:"px-6"},[r("div",{staticClass:"w-full mt-6"},[r("div",{staticClass:"flex justify-between items-center mx-2 mt-4"},[r("label",{staticClass:"flex-grow cursor-pointer",attrs:{for:"show-balance"}},[e._v("Show balance")]),e._v(" "),r("ui-switch",{attrs:{id:"show-balance"},model:{value:e.form.showBalance,callback:function(t){e.$set(e.form,"showBalance",t)},expression:"form.showBalance"}})],1),e._v(" "),r("p",{staticClass:"text-[0.85rem] opacity-50 mt-1 mx-2"},[e._v("\n                "+e._s(e.form.showBalance?"Your balance will be visible when displayed on your dashboard.":"You balance will be hidden when displayed.")+"\n            ")])]),e._v(" "),r("div",{staticClass:"w-full"},[r("div",{staticClass:"flex justify-between items-center mt-8 mx-2"},[r("label",{staticClass:"flex-grow cursor-pointer",attrs:{for:"show-balance-on-account"}},[e._v("Only show balance from account page")]),e._v(" "),r("ui-switch",{attrs:{id:"show-balance-on-account"},model:{value:e.form.showBalanceFromAccountPage,callback:function(t){e.$set(e.form,"showBalanceFromAccountPage",t)},expression:"form.showBalanceFromAccountPage"}})],1),e._v(" "),r("p",{staticClass:"text-[0.85rem] opacity-50 mt-1 mx-2"},[e._v("\n                "+e._s(e.form.showBalanceFromAccountPage?"Toggle show balance from your account setting alone.":"Toggle show balance from anywhere in the app.")+"\n            ")])]),e._v(" "),r("div",{staticClass:"w-full"},[r("div",{staticClass:"flex justify-between items-center mt-8 mx-2"},[r("label",{staticClass:"flex-grow cursor-pointer",attrs:{for:"remember-me"}},[e._v("Remember me on this device")]),e._v(" "),r("ui-switch",{attrs:{id:"remember-me"},model:{value:e.form.rememberMe,callback:function(t){e.$set(e.form,"rememberMe",t)},expression:"form.rememberMe"}})],1),e._v(" "),r("p",{staticClass:"text-[0.85rem] opacity-50 mt-1 mx-2"},[e._v("\n                "+e._s(e.form.rememberMe?"You will be automatically logged in when you refresh the app in less than an hour.":"You will always need to log in.")+"\n            ")])]),e._v(" "),r("div",{staticClass:"w-full"},[r("div",{staticClass:"flex justify-between items-center mt-8 mx-2"},[r("label",{staticClass:"flex-grow cursor-pointer",attrs:{for:"logout-sessions"}},[e._v("Logout all other sessions on login")]),e._v(" "),r("ui-switch",{attrs:{id:"logout-sessions"},model:{value:e.form.logoutOtherSessions,callback:function(t){e.$set(e.form,"logoutOtherSessions",t)},expression:"form.logoutOtherSessions"}})],1),e._v(" "),r("p",{staticClass:"text-[0.85rem] opacity-50 mt-1 mx-2"},[e._v("\n                "+e._s(e.form.logoutOtherSessions?"End all sessions when you login.":"Keep multiple sessions.")+"\n            ")])])]),e._v(" "),r("tab-footer",{attrs:{"full-bleed":"","disable-revert":!e.formUpdated,"disable-save":!e.formUpdated},on:{"save-changes":e.submit,"revert-changes":e.resetForm}})],1)}),[],!1,null,null,null).exports;r(48),r(144),r(552);function z(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var N={name:"UiTab",computed:{pageTab:function(){return this.$route.query.tab||"general"},tabItems:function(){var e=this,t=[{title:"General",selected:"general"==this.pageTab,id:"general-ctrl"},{title:"Preference",selected:"preference"==this.pageTab,control:"preference",id:"preference-ctrl"},{title:"Change password",selected:"change-password"==this.pageTab,control:"change-password",id:"change-password-ctrl",warn:!0},{title:"Delete account",selected:"delete-account"==this.pageTab,control:"delete-account",id:"delete-account-ctrl",isDelete:!0}].map((function(t,r){return R(R({},t),{},{tabindex:e.tabFocus==r?"0":"-1"})}));return t.find((function(e){return e.selected}))||(t[0].selected=!0),t},activeTabIndex:function(){var e=this.tabItems.findIndex((function(e){return e.selected}));return e>-1?e:0},hasActive:function(){return this.activeTabIndex}},watch:{activeTabIndex:function(e){this.tabFocus=e}},methods:{updateTab:function(e){var t=e.value,r=e.type,o=void 0===r?"replace":r;this.$router[o]({query:R(R({},this.$route.query),{},{tab:t})})}},render:function(e){var t=this,r={"data-sape":""},div=function(t,r){return e("div",t,r)};return div({attrs:R(R({},r),{},{"aria-label":"tabs"}),staticClass:"root px-6 grid grid-rows-[auto,1fr]"},[[div({attrs:R(R({},r),{},{role:"tablist","aria-label":"account tab"}),staticClass:"tablist fill-after max-w-[calc(100vw-3rem)] overflow-x-auto overflow-y-hidden"},t.tabItems.map((function(o,n){return l={ref:"tabctrl-".concat(n),key:n,props:{text:!0},attrs:R(R({},r),{},{role:"tab","aria-selected":o.selected,"aria-controls":o.control,id:o.id,to:o.selected?void 0:{query:R(R({},t.$route.query),{},{tab:o.control})},componentProps:o.selected?void 0:{replace:!0},on:{click:function(e){e.currentTarget.scrollIntoView()}}}),staticClass:"tabctrl h-[48px] px-0 mr-4 rounded-none min-w-[fit-content]",class:[{__selected:o.selected,"text-blue-600 dark:text-blue-400":o.selected&&!o.isDelete&&!o.warn,"text-red-600 dark:text-red-400":o.selected&&o.isDelete,"text-yellow-600 dark:text-yellow-200":o.selected&&o.warn}]},c=[div({attrs:R({},r),staticClass:"tabctrl-text",class:[{__selected:o.selected}]},o.title),o.selected?div({staticClass:"fade-appear absolute w-full h-[2px] bottom-0 rounded-t-md",class:{"bg-blue-700 dark:bg-blue-500":!o.isDelete&&!o.warn,"bg-yellow-500 dark:bg-yellow-300":o.warn,"bg-red-700 dark:bg-red-500":o.isDelete}}):null],e("ui-btn",l,c);var l,c})))],this.$slots.default.filter((function(e){return e.tag}))[this.activeTabIndex]])}},Z=(r(553),{components:{UiTab:Object(f.a)(N,undefined,undefined,!1,null,null,null).exports,GeneralTab:E,PreferenceTab:I,ChangePasswordTab:O,DeleteAccountTab:A},head:function(){return{title:"Account"}}}),L=Object(f.a)(Z,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"min-h-[100vh] min-w-full"},[r("ui-tab",[r("general-tab"),e._v(" "),r("preference-tab"),e._v(" "),r("change-password-tab"),e._v(" "),r("delete-account-tab")],1)],1)}),[],!1,null,null,null);t.default=L.exports}}]);