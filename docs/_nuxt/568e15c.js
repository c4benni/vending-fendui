(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{572:function(e,t,r){"use strict";r.r(t);var n=r(0),o=(r(24),r(87),r(108),r(530),r(34),r(14),r(63),{components:{ProductForm:r(541).a},data:function(){return{detailsValidity:{name:!1,caption:!0,description:!0},form:{type:null,cost:null,inventory:null},selectedType:""}},head:function(){return{title:"Create product"}},computed:{disableSubmit:function(){var e=Object.values(this.detailsValidity).includes(!1),t=this.form,r=t.type,n=t.cost,o=t.inventory;return e||!r||!n||!o}},methods:{formUpdated:function(e){this.form=e.form,this.detailsValidity=e.detailsValidity,this.selectedType=e.selectedType},submit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,caption,o,c,l,d,m,data,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disableSubmit){t.next=2;break}return t.abrupt("return",null);case 2:return e.$commit("UPDATE",{path:"processingDone",value:null}),t.next=5,e.$nextTick();case 5:return e.$commit("UPDATE",{path:"dashboardProcessing",value:!0}),e.$commit("UPDATE",{path:"processingDone",value:{title:"Creating product",subtitle:"Please wait while we create your product.",key:Date.now()}}),r=e.form,n=r.name,caption=r.caption,o=r.description,c=r.cost,l=r.inventory,d={productName:n,amountAvailable:l,cost:c,type:e.selectedType.toLowerCase()},caption&&(d.caption=caption),o&&(d.description=o),t.next=13,e.$apiCall("product","POST",d);case 13:return m=t.sent,data=m.data,h=m.error,e.$commit("UPDATE",{path:"processingDone",value:{title:h?"An error occured":"Product created",subtitle:(null==h?void 0:h.message)||(null==data?void 0:data.message),error:!!h,key:Date.now()}}),t.next=19,e.$sleep(100);case 19:!h&&e.$router.push("/dashboard/my-products");case 20:case"end":return t.stop()}}),t)})))()}}}),c=o,l=r(17),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ProductForm",{on:{"update-parent":e.formUpdated}},[r("ui-btn",{staticClass:"gap-x-2 w-8/12 h-[48px] mx-auto",class:{"bg-blue-700 text-white hover:bg-blue-800 active:bg-blue-900 dark:bg-blue-500 dark:text-black dark:hover:bg-blue-600 dark:hover:bg-opacity-70 dark:active:bg-blue-700 dark:active:bg-opacity-60":!e.disableSubmit},attrs:{disabled:e.disableSubmit},on:{click:e.submit}},[r("ui-icon",{attrs:{name:"plus"}}),e._v("Create product\n    ")],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);