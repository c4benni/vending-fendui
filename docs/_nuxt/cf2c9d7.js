(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{533:function(t,e,r){"use strict";r(48);var n={name:"AppRating",props:{readonly:Boolean},data:function(){return{rating:4}},render:function(t){var e=this;if(!this.$ui.mounted)return null;var div=function(e,r){return t("div",e,r)};return div({class:["grid grid-flow-col items-center justify-start"],on:{click:function(){}}},[1,2,3,4,5].map((function(r,n){var o,c,l=(null==e?void 0:e.rating)&&e.rating>=r;return function(e,r){return t("uiBtn",e,r)}({key:n+"rating",class:["rating w-[32px] h-[32px] min-h-[32px] p-0 rounded-full before:bg-yellow-500 hover:bg-opacity-100",{"text-yellow-500":l}],size:"sm",readonly:e.readonly,on:{click:function(){e.rating==r?e.rating=null:e.rating=r}}},[div({staticClass:"flex",class:[{"fade-appear opacity-1":l,"opacity-[0.65]":!l}]},[(o={props:{name:l?"star":"starOutline",size:"16px"}},t("uiIcon",o,c))])])})))}},o=r(17),component=Object(o.a)(n,undefined,undefined,!1,null,null,null);e.a=component.exports},567:function(t,e,r){"use strict";r.r(e);r(14),r(18),r(8),r(22),r(13),r(23);var n=r(0),o=r(6),c=(r(24),r(21),r(46),r(90)),l=(r(19),r(303),r(48),r(198),r(304),r(196)),main=r(3);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={components:{UiIcon:l.default},data:function(){return{loading:!0,errorFetching:{message:"",status:null}}},computed:h(h({},Object(c.c)(["transactions"])),{},{tableHead:function(){var output=["Date",this.isBuyer?"Type":"Product ID",this.isBuyer?"Amount":"Price tag","Quantity"];return this.isBuyer?output.push("Product ID","Seller ID"):output.push("Buyer ID"),output},transactionsLength:function(){return Object.keys(this.transactions).length},tableCaption:function(){var t=this.transactionsLength;return console.log(t),"Recent ".concat(this.isBuyer?"transaction":"purchase").concat(t>1?"s":"")},renderToggleBalance:function(){return this.$store.getters.renderToggleBalance},showBalance:function(){return this.$store.state.showBalance},showBalanceIcon:function(){return this.showBalance?"eyeOff":"eye"},showResetButton:function(){var t;return!/^¢0/.test(null===(t=this.userInfo)||void 0===t?void 0:t.depositTotal)&&this.isBuyer},userInfo:function(){return this.$store.getters.userInfo},isBuyer:function(){return this.userInfo.isBuyer},availableAmount:function(){var t=this.userInfo,e=t[t.isBuyer?"depositTotal":"incomeTotal"]||0;return this.showBalance?e||"¢0":"*".repeat(5)},availableCoins:function(){var t=this.userInfo;return Object.entries(t[t.isBuyer?"deposit":"income"]||{}).reverse().map((function(t){var e=t[0]*t[1];return e>99?"$".concat((e/100).toFixed(2)):"¢".concat(e)}))},disableWithdraw:function(){return!this.isBuyer&&!parseFloat(this.userInfo.income||0)},getErrorMessage:function(){return this.errorFetching.message},showRetryButton:function(){return parseFloat(this.errorFetching.status||0)>=500}}),created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!t.transactionsLength,e.next=3,t.fetchTransactions();case 3:case"end":return e.stop()}}),e)})))()},activated:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTransactions();case 2:case"end":return e.stop()}}),e)})))()},methods:h(h({},Object(c.b)(["getTransactions"])),{},{fetchTransactions:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactions("?limit=5");case 2:return r=e.sent,n=r.length,e.next=6,t.$refreshUser();case 6:0==n&&(t.errorFetching={message:"You have no recent transaction",status:404}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},getDate:function(t){return new Date(parseFloat(t)).toLocaleDateString()},formatAmount:function(t){return Object(main.f)(t)}})},f=r(17);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={components:{TransactionHistory:Object(f.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mx-6 shadow-md dark:shadow-none"},[r("div",{staticClass:"subtitle uppercase text-[0.8rem] px-6"},[t._v("\n    Total "+t._s(t.userInfo.isBuyer?"deposit":"income")+"\n  ")]),t._v(" "),r("div",{staticClass:"title lead-title fill-before grid md:flex md:justify-between items-center px-6 pb-6 before:border-dotted relative"},[r("div",[r("span",{key:t.showBalanceIcon,staticClass:"fade-appear inline-block"},[t._v(t._s(t.availableAmount))]),t._v(" "),t.renderToggleBalance?r("ui-btn",{staticClass:"ml-1 min-h-[38px]",attrs:{title:t.showBalance?"hide balance":"show balance"},on:{click:t.$toggleShowBalance}},[r("ui-icon",{attrs:{name:t.showBalanceIcon,size:"18"}})],1):t._e()],1),t._v(" "),r("div",{staticClass:"grid gap-3 grid-cols-[repeat(auto-fill,minmax(170px,1fr))] md:grid-cols-[initial] md:grid-flow-col flex-grow justify-end mt-6 md:mt-0"},[r("ui-btn",{staticClass:"rounded-sm px-5 h-[48px] bg-opacity-100 dark:bg-opacity-20 hover:bg-opacity-35 dark:hover:bg-opacity-35 gap-x-1 hover:bg-opacity-100 dark:hover:bg-opacity-80 hover:text-white hover:bg-opacity-35 dark:hover:bg-opacity-35 w-full text-md",class:{"bg-blue-800 dark:bg-blue-400 text-white":!t.disableWithdraw,"opacity-60":t.disableWithdraw},attrs:{title:t.isBuyer?"deposit coin(s)":"withdraw your income",to:t.isBuyer?"/dashboard/deposit":"/dashboard",disabled:t.disableWithdraw}},[r("ui-icon",{attrs:{name:t.isBuyer?"deposit":"withdraw",size:"28px"}}),t._v("\n        "+t._s(t.isBuyer?"Deposit coins":"Instant withdrawal")+"\n      ")],1),t._v(" "),t.showResetButton?r("ui-btn",{staticClass:"rounded-sm px-5 h-[48px] bg-red-800 dark:bg-red-400 bg-opacity-20 dark:bg-opacity-10 hover:bg-opacity-100 dark:hover:bg-opacity-80 hover:bg-opacity-35 dark:hover:bg-opacity-35 gap-x-1 w-full opacity-80 text-red-900 dark:text-red-200 hover:opacity-100 hover:text-white text-md",attrs:{title:"reset coin",to:"/dashboard/reset-deposit",tag:"nuxt-link"}},[r("ui-icon",{attrs:{name:"delete",size:"28px"}}),t._v("Reset coins\n      ")],1):t._e()],1)]),t._v(" "),r("p",{staticClass:"uppercase subtitle text-[0.75rem] mt-6 mb-3 px-6 text-center"},[t._v("\n    "+t._s(t.tableCaption)+"\n  ")]),t._v(" "),r("div",{staticClass:"overflow-x-auto w-full"},[t.loading||t.errorFetching.message?r("div",{staticClass:"card min-h-[128px] grid justify-center items-center mx-6",class:{"bg-white shadow-sm":t.$theme.light}},[t.loading?r("div",{staticClass:"spinner-border"}):r("div",{staticClass:"grid justify-items-center"},[r("p",{staticClass:"mb-3"},[t._v("\n          "+t._s(t.getErrorMessage)+"\n        ")]),t._v(" "),t.showRetryButton?r("ui-btn",{staticClass:"bg-blue-700 text-white hover:bg-blue-800 active:bg-blue-900 dark:bg-blue-500 dark:text-black dark:hover:bg-blue-600 dark:hover:bg-opacity-70 dark:active:bg-blue-700 dark:active:bg-opacity-60"},[t._v("Retry")]):t._e()],1)]):r("table",{staticClass:"w-full",attrs:{"aria-label":t.tableCaption.toLowerCase()}},[r("thead",{staticClass:"bg-white dark:bg-blue-gray-900 dark:bg-opacity-80 border-t border-b border-solid border-black dark:border-white border-opacity-[0.05] dark:border-opacity-[0.05] w-full text-left"},[r("tr",{staticClass:"min-h-[48px] h-[48px]"},t._l(t.tableHead,(function(th,i){return r("th",{key:i},[r("div",{staticClass:"px-6"},[t._v(t._s(th))])])})),0)]),t._v(" "),r("tbody",t._l(t.transactions,(function(e,i){return r("tr",{key:i,staticClass:"fade-appear bg-white dark:bg-blue-gray-900 bg-opacity-0 dark:bg-opacity-0 hover:odd:bg-opacity-20 dark:hover:odd:bg-opacity-20 hover:even:bg-opacity-80 dark:hover:even:bg-opacity-70 even:bg-opacity-60 dark:even:bg-opacity-50"},[r("td",[r("div",{staticClass:"grid grid-flow-col gap-x-3 py-4 px-6 justify-start"},[r("div",[t._v(t._s(t.getDate(e.timestamp)))])])]),t._v(" "),r("td",[r("div",{staticClass:"py-4 px-6",class:{capitalize:t.isBuyer}},[t.isBuyer?r("span",{staticClass:"rounded-full bg-opacity-75 dark:bg-opacity-75 text-[0.8rem] py-1 px-2 whitespace-nowrap",class:{"bg-green-800 text-white":"deposit"==e.type,"bg-yellow-500 text-black":"purchase"==e.type,"bg-red-800 text-white":"reset"==e.type}},[t._v(t._s(e.type))]):r("div",{staticClass:"opacity-80 text-[0.875rem]"},[r("nuxt-link",{attrs:{to:"/dashboard/shop?id="+e.productId}},[t._v(t._s(e.productId))])],1)])]),t._v(" "),r("td",[r("div",{staticClass:"py-4 px-6"},[t._v("\n              "+t._s(t.formatAmount(e.amount))+"\n            ")])]),t._v(" "),r("td",[r("div",{staticClass:"opacity-80 text-[0.875rem] py-4 px-6 whitespace-nowrap"},[t._v("\n              "+t._s(e.quantity||"--")+"\n            ")])]),t._v(" "),t.isBuyer?[r("td",[r("div",{staticClass:"opacity-80 text-[0.875rem] py-4 px-6 whitespace-nowrap"},[r("nuxt-link",{attrs:{to:"/dashboard/shop?id="+e.productId}},[t._v(t._s(e.productId||"--"))])],1)]),t._v(" "),r("td",[r("div",{staticClass:"opacity-80 text-[0.875rem] py-4 px-6 whitespace-nowrap"},[t._v("\n                "+t._s(e.secondParty||"--")+"\n              ")])])]:r("td",[r("div",{staticClass:"opacity-80 text-[0.875rem] py-4 px-6 whitespace-nowrap"},[t._v("\n              "+t._s(e.secondParty||"--")+"\n            ")])])],2)})),0)])])])}),[],!1,null,null,null).exports,AppRating:r(533).a},head:function(){return{title:"Overview"}},computed:m(m({},Object(c.c)(["products","user"])),{},{productsLength:function(){return Object.keys(this.products||{}).length},isBuyer:function(){var t;return"buyer"==(null===(t=this.user)||void 0===t?void 0:t.role)},productsSubTitle:function(){var t=this.productsLength>1;return"".concat(t?"New":"A new"," product").concat(t?"s":""," added")},productsTitle:function(){return this.isBuyer?"Peep the store":"My product".concat(this.productsLength>1?"s":"")}}),created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchProducts();case 2:case"end":return e.stop()}}),e)})))()},methods:m(m({},Object(c.b)(["getProducts"])),{},{formatCost:function(t){return Object(main.f)(t)},fetchProducts:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="buyer"==(null===(r=t.user)||void 0===r?void 0:r.role)?"?limit=10":'?where={"sellerId":"'.concat(null===(n=t.user)||void 0===n?void 0:n.id,'"}&limit=10'),e.next=3,t.getProducts(o);case 3:case"end":return e.stop()}}),e)})))()},getProductRoute:function(t){return this.isBuyer?"/dashboard/shop?id=".concat(t):"/dashboard/my-products?edit=".concat(t)}})},x=Object(f.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"grid gap-y-6"},[r("TransactionHistory"),t._v(" "),t.productsLength?r("div",{staticClass:"card lg:mx-6 max-w-[100vw] lg:max-w-[calc(calc(min(100vw,1920px)-3rem)-280px)] lg:bg-opacity-100 bg-opacity-0 dark:bg-opacity-0 lg:dark:bg-opacity-50"},[r("div",{staticClass:"subtitle px-6"},[t._v(t._s(t.productsSubTitle))]),t._v(" "),r("div",{staticClass:"title lead-subtitle fill-before px-6"},[t._v(t._s(t.productsTitle))]),t._v(" "),r("div",{staticClass:"mt-6 grid gap-3 sm:gap-4 md:gap-6 overflow-x-scroll overflow-y-visible py-3 grid-cols-[repeat(10,auto),1px] w-full pl-6 pb-2 hide-scrollbar after:contents after:w-full"},t._l(t.products,(function(e,i){return r("uiBtn",{key:i,staticClass:"w-[calc(100vw-3rem)] sm:w-[min(calc(100vw-3rem),350px)] bg-white dark:bg-blue-gray-900 bg-opacity-100 dark:bg-opacity-50 rounded-sm pb-6 cursor-pointer hover:bg-blue-gray-50 dark:hover:bg-opacity-90 grid-flow-row p-0 text-left justify-stretch font-normal transform-gpu transition-transform hover:translate-y-[-0.25rem]",class:{"mr-6":i==t.products.length-1},attrs:{tag:"nuxt-link",to:t.getProductRoute(e.id),outlined:"","outlined-opacity":t.$theme.dark?"0.075":"0.1","outlined-stroke":t.$theme.dark?".75px":"1px"}},[r("div",{staticClass:"h-[300px] w-full hover:scale-[1.01] transform-gpu transition-transform fill-before before-divide before:border-b relative"},[r("app-img",{staticClass:"h-full object-cover w-full",attrs:{"public-id":e.background}})],1),t._v(" "),r("div",{staticClass:"px-4 pt-2"},[r("div",{staticClass:"flex justify-between items-center"},[r("div",{staticClass:"text-opacity-70 text-black dark:text-opacity-70 dark:text-white text-[0.8rem] capitalize"},[t._v(t._s(e.type))]),t._v(" "),r("div",{staticClass:"font-semibold"},[t._v(t._s(t.formatCost(e.cost)))])])]),t._v(" "),r("div",{staticClass:"font-bold text-xl px-4 truncate capitalize"},[t._v(t._s(e.productName))]),t._v(" "),r("app-rating",{staticClass:"mx-3 mt-2",attrs:{readonly:""}})],1)})),1)]):t._e()],1)}),[],!1,null,null,null);e.default=x.exports}}]);